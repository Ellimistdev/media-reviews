<h1 id='username'><%= "#{@user.attributes['username']}" %></h1>
<% if current_user == @user %>
  <fieldset>
    <legend>Update profile information:</legend>
    <%= render 'form', url: user_path(@user), user: @user %>
    <p>Link your social!</p>  
    <p>This will not merge any existing data associated with any other accounts</p>  
    <%= render 'social' %>
  </fieldset>
<% end %>
<ul>
  <li><%= "User id: #{@user.attributes['id']}" %></li>
  <li><button id='review-button'>User Reviews</button></li>
  <li><button id='view-button'>User Views</button></li>
</ul>
<div id='user-data'>
</div>

<script type='text/javascript' charset='utf-8'>
  const dataHandler = new DataHandler;
  const id = document.URL.match(/(\d+)(?!.*\d+)/)[0];
  const target = document.getElementById('user-data')

  document.getElementById('review-button')
    .addEventListener('click', () => dataHandler.renderData(`/users/${id}/reviews`, target, 'review'));
  document.getElementById('view-button')
    .addEventListener('click', () => dataHandler.renderData(`/users/${id}/views`, target, 'view'));  
</script>